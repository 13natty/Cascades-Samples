<?xml version="1.0" encoding="ISO-8859-1"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<!-- invoketarget.qdoc -->
  <title>Cascades : Invoke Target Example</title>
  <link rel="stylesheet" type="text/css" href="style/offline.css" />
</head>
<body>
<div class="header" id="qtdocheader">
  <div class="content"> 
    <a href="index.html" class="qtref"><span>Qt-based BB10 API Examples Documentation</span></a>
  </div>
  <div class="breadcrumb toolblock">
    <ul>
      <li class="first"><a href="index.html">Home</a></li>
      <!--  Breadcrumbs go here -->
<li><a href="http://qt.nokia.com/doc/4.7/all-examples.html">Examples</a></li>
<li>Invoke Target Example</li>
    </ul>
  </div>
</div>
<div class="content mainContent">
<div class="toc">
<h3><a name="toc">Contents</a></h3>
<ul>
<li class="level1"><a href="#description">Description</a></li>
<li class="level1"><a href="#overview">Overview</a></li>
<li class="level1"><a href="#the-ui">The UI</a></li>
<li class="level1"><a href="#app">App</a></li>
<li class="level1"><a href="#bar-descriptor-xml">bar-descriptor.xml</a></li>
</ul>
</div>
<h1 class="title">Invoke Target Example</h1>
<span class="subtitle"></span>
<!-- $$$invoketarget-description -->
<div class="descr"> <a name="details"></a>
<p>Files:</p>
<ul>
<li><a href="invoketarget-assets-composer-qml.html">invoketarget/assets/Composer.qml</a></li>
<li><a href="invoketarget-assets-labellabel-qml.html">invoketarget/assets/LabelLabel.qml</a></li>
<li><a href="invoketarget-assets-picker-qml.html">invoketarget/assets/Picker.qml</a></li>
<li><a href="invoketarget-assets-previewer-qml.html">invoketarget/assets/Previewer.qml</a></li>
<li><a href="invoketarget-assets-main-qml.html">invoketarget/assets/main.qml</a></li>
<li><a href="invoketarget-src-app-cpp.html">invoketarget/src/app.cpp</a></li>
<li><a href="invoketarget-src-app-hpp.html">invoketarget/src/app.hpp</a></li>
<li><a href="invoketarget-src-main-cpp.html">invoketarget/src/main.cpp</a></li>
<li><a href="invoketarget-invoketarget-pro.html">invoketarget/invoketarget.pro</a></li>
<li><a href="invoketarget-translations-invoketarget-pro.html">invoketarget/translations/invoketarget.pro</a></li>
</ul>
<a name="description"></a>
<h2>Description</h2>
<p>The Invoke Target example shows how to handle incoming invocation requests from other applications.</p>
<p class="centerAlign"><img src="images/invoketarget-example.png" /></p><a name="overview"></a>
<h2>Overview</h2>
<p>In this example we'll learn how to use the <tt>InvokeManager</tt> and <tt>InvokeRequest</tt> classes of the BB10 framework to handle incoming invocation requests from external applications.</p>
<p>All the business logic is encapsulated in the C++ class <tt>App</tt>, which is exported to the QML files under the name '<a href="#app">_app</a>'.</p>
<a name="the-ui"></a>
<h2>The UI</h2>
<p>The UI of this sample application consists of a main page which displays a hint paragraph with a few examples on how to use this application, this display comes up when launched as an application.</p>
<p>In addition, there are three new pages (Composer, Picker and Previewer), which are launched when their bound target id's are invoked via the invokeclient sample application. All three are registerd and invoked as &quot;Cards&quot;.</p>
<p class="centerAlign"><img src="images/invoketarget-example1.png" /></p><p>The Composer page consists of an TextArea with two button actions (cancel and share), which cancel the current task or mimick sharing option.</p>
<pre class="qml">    <span class="type">NavigationPane</span> {
        <span class="name">backButtonsVisible</span>: <span class="number">false</span>
        <span class="name">peekEnabled</span>: <span class="number">true</span>
        <span class="type">Page</span> {
            <span class="name">titleBar</span>: <span class="name">TitleBar</span> {
                <span class="name">title</span>: <span class="name">qsTr</span>(<span class="string">&quot;Composer&quot;</span>)
                <span class="name">acceptAction</span>: <span class="name">ActionItem</span> {
                    <span class="name">title</span>: <span class="name">qsTr</span>(<span class="string">&quot;Share&quot;</span>)
                    <span class="name">onTriggered</span>: {
                        <span class="name">_app</span>.<span class="name">cardDone</span>(<span class="name">qsTr</span>(<span class="string">&quot;Content Shared.&quot;</span>));
                    }
                }
                <span class="name">dismissAction</span>: <span class="name">ActionItem</span> {
                    <span class="name">title</span>: <span class="name">qsTr</span>(<span class="string">&quot;Cancel&quot;</span>)
                    <span class="name">onTriggered</span>: {
                        <span class="name">_app</span>.<span class="name">cardDone</span>(<span class="name">qsTr</span>(<span class="string">&quot;Dont feel like sharing today?&quot;</span>));
                    }
                }
            }
            <span class="type">Container</span> {
                <span class="name">horizontalAlignment</span>: <span class="name">HorizontalAlignment</span>.<span class="name">Fill</span>
                <span class="type">Header</span> {
                    <span class="name">title</span>: <span class="name">qsTr</span>(<span class="string">&quot;Share via Sample Composer&quot;</span>)
                }
                <span class="type">Container</span> {
                    <span class="name">horizontalAlignment</span>: <span class="name">HorizontalAlignment</span>.<span class="name">Fill</span>
                    <span class="type">TextArea</span> {
                        <span class="name">horizontalAlignment</span>: <span class="name">HorizontalAlignment</span>.<span class="name">Center</span>
                        <span class="name">preferredHeight</span>: <span class="number">400</span>
                        <span class="name">text</span>: <span class="name">_app</span>.<span class="name">data</span>
                        <span class="name">onCreationCompleted</span>: {
                            <span class="name">requestFocus</span>();
                        }
                    }
                }
            }
        }
    }</pre>
<p class="centerAlign"><img src="images/invoketarget-example2.png" /></p><p>The Picker page displays many egg images and asks the user to pick one when invoked.</p>
<pre class="qml">    <span class="type">NavigationPane</span> {
        <span class="name">backButtonsVisible</span>: <span class="number">false</span>
        <span class="name">peekEnabled</span>: <span class="number">true</span>
        <span class="type">Page</span> {
            <span class="name">titleBar</span>: <span class="name">TitleBar</span> {
                <span class="name">title</span>: <span class="name">qsTr</span>(<span class="string">&quot;Pick an Egg&quot;</span>)
                <span class="name">dismissAction</span>: <span class="name">ActionItem</span> {
                    <span class="name">title</span>: <span class="name">qsTr</span>(<span class="string">&quot;Cancel&quot;</span>)
                    <span class="name">onTriggered</span>: {
                        <span class="name">_app</span>.<span class="name">cardDone</span>(<span class="name">qsTr</span>(<span class="string">&quot;Boo! No eggs today..&quot;</span>));
                    }
                }
            }
            <span class="type">Container</span> {
                <span class="name">layout</span>: <span class="name">DockLayout</span> {
                }
                <span class="name">horizontalAlignment</span>: <span class="name">HorizontalAlignment</span>.<span class="name">Fill</span>
                <span class="type">ImageButton</span> {
                    <span class="name">horizontalAlignment</span>: <span class="name">HorizontalAlignment</span>.<span class="name">Left</span>
                    <span class="name">verticalAlignment</span>: <span class="name">VerticalAlignment</span>.<span class="name">Top</span>
                    <span class="name">defaultImageSource</span>: <span class="string">&quot;asset:///images/egg.png&quot;</span>
                    <span class="name">onClicked</span>: {
                        <span class="name">_app</span>.<span class="name">cardDone</span>(<span class="name">qsTr</span>(<span class="string">&quot;Yummy!&quot;</span>));
                    }
                }
                <span class="type">ImageButton</span> {
                    <span class="name">horizontalAlignment</span>: <span class="name">HorizontalAlignment</span>.<span class="name">Center</span>
                    <span class="name">verticalAlignment</span>: <span class="name">VerticalAlignment</span>.<span class="name">Top</span>
                    <span class="name">defaultImageSource</span>: <span class="string">&quot;asset:///images/egg.png&quot;</span>
                    <span class="name">onClicked</span>: {
                        <span class="name">_app</span>.<span class="name">cardDone</span>(<span class="name">qsTr</span>(<span class="string">&quot;Quack Quack..&quot;</span>));
                    }
                }
                <span class="type">ImageButton</span> {
                    <span class="name">horizontalAlignment</span>: <span class="name">HorizontalAlignment</span>.<span class="name">Right</span>
                    <span class="name">verticalAlignment</span>: <span class="name">VerticalAlignment</span>.<span class="name">Top</span>
                    <span class="name">defaultImageSource</span>: <span class="string">&quot;asset:///images/egg.png&quot;</span>
                    <span class="name">onClicked</span>: {
                        <span class="name">_app</span>.<span class="name">cardDone</span>(<span class="name">qsTr</span>(<span class="string">&quot;Mmmmmm..&quot;</span>));
                    }
                }
                <span class="type">ImageButton</span> {
                    <span class="name">horizontalAlignment</span>: <span class="name">HorizontalAlignment</span>.<span class="name">Left</span>
                    <span class="name">verticalAlignment</span>: <span class="name">VerticalAlignment</span>.<span class="name">Center</span>
                    <span class="name">defaultImageSource</span>: <span class="string">&quot;asset:///images/egg.png&quot;</span>
                    <span class="name">onClicked</span>: {
                        <span class="name">_app</span>.<span class="name">cardDone</span>(<span class="name">qsTr</span>(<span class="string">&quot;Delicio!&quot;</span>));
                    }
                }
                <span class="type">ImageButton</span> {
                    <span class="name">horizontalAlignment</span>: <span class="name">HorizontalAlignment</span>.<span class="name">Center</span>
                    <span class="name">verticalAlignment</span>: <span class="name">VerticalAlignment</span>.<span class="name">Center</span>
                    <span class="name">defaultImageSource</span>: <span class="string">&quot;asset:///images/egg.png&quot;</span>
                    <span class="name">onClicked</span>: {
                        <span class="name">_app</span>.<span class="name">cardDone</span>(<span class="name">qsTr</span>(<span class="string">&quot;Yuck!&quot;</span>));
                    }
                }
                <span class="type">ImageButton</span> {
                    <span class="name">horizontalAlignment</span>: <span class="name">HorizontalAlignment</span>.<span class="name">Right</span>
                    <span class="name">verticalAlignment</span>: <span class="name">VerticalAlignment</span>.<span class="name">Center</span>
                    <span class="name">defaultImageSource</span>: <span class="string">&quot;asset:///images/egg.png&quot;</span>
                    <span class="name">onClicked</span>: {
                        <span class="name">_app</span>.<span class="name">cardDone</span>(<span class="name">qsTr</span>(<span class="string">&quot;Whoa!&quot;</span>));
                    }
                }
                <span class="type">ImageButton</span> {
                    <span class="name">horizontalAlignment</span>: <span class="name">HorizontalAlignment</span>.<span class="name">Left</span>
                    <span class="name">verticalAlignment</span>: <span class="name">VerticalAlignment</span>.<span class="name">Bottom</span>
                    <span class="name">defaultImageSource</span>: <span class="string">&quot;asset:///images/egg.png&quot;</span>
                    <span class="name">onClicked</span>: {
                        <span class="name">_app</span>.<span class="name">cardDone</span>(<span class="name">qsTr</span>(<span class="string">&quot;Love it..&quot;</span>));
                    }
                }
                <span class="type">ImageButton</span> {
                    <span class="name">horizontalAlignment</span>: <span class="name">HorizontalAlignment</span>.<span class="name">Center</span>
                    <span class="name">verticalAlignment</span>: <span class="name">VerticalAlignment</span>.<span class="name">Bottom</span>
                    <span class="name">defaultImageSource</span>: <span class="string">&quot;asset:///images/egg.png&quot;</span>
                    <span class="name">onClicked</span>: {
                        <span class="name">_app</span>.<span class="name">cardDone</span>(<span class="name">qsTr</span>(<span class="string">&quot;Get it cooked already!&quot;</span>));
                    }
                }
                <span class="type">ImageButton</span> {
                    <span class="name">horizontalAlignment</span>: <span class="name">HorizontalAlignment</span>.<span class="name">Right</span>
                    <span class="name">verticalAlignment</span>: <span class="name">VerticalAlignment</span>.<span class="name">Bottom</span>
                    <span class="name">defaultImageSource</span>: <span class="string">&quot;asset:///images/egg.png&quot;</span>
                    <span class="name">onClicked</span>: {
                        <span class="name">_app</span>.<span class="name">cardDone</span>(<span class="name">qsTr</span>(<span class="string">&quot;Sunny side up&quot;</span>));
                    }
                }
            }
        }
    }</pre>
<p>The Previewer page displays the image with which it was invoked using the uri variable that was passed through the invocation request.</p>
<pre class="qml">    <span class="type">NavigationPane</span> {
        <span class="name">backButtonsVisible</span>: <span class="number">true</span>
        <span class="name">peekEnabled</span>: <span class="number">true</span>
        <span class="type">Page</span> {
            <span class="name">titleBar</span>: <span class="name">TitleBar</span> {
                <span class="name">title</span>: <span class="name">qsTr</span>(<span class="string">&quot;Previewer&quot;</span>)
            }
            <span class="type">Container</span> {
                <span class="name">horizontalAlignment</span>: <span class="name">HorizontalAlignment</span>.<span class="name">Fill</span>
                <span class="type">ImageView</span> {
                    <span class="name">imageSource</span>: <span class="name">_app</span>.<span class="name">uri</span>
                    <span class="name">scalingMethod</span>: <span class="name">ScalingMethod</span>.<span class="name">AspectFit</span>
                }
            }
        }
    }</pre>
<a name="app"></a>
<h2>App</h2>
<p>The <tt>App</tt> object is the mediator between the UI and the <tt>bb::system::InvokeManager</tt> class. In stores the startup mode and values of incoming invocation requests and makes them available to the UI through properties.</p>
<pre class="cpp">    <span class="keyword">class</span> App : <span class="keyword">public</span> <span class="type"><a href="http://qt.nokia.com/doc/4.7/qobject.html">QObject</a></span>
    {
        Q_OBJECT

        <span class="comment">// The textual representation of the startup mode of the application</span>
        Q_PROPERTY(<span class="type"><a href="http://qt.nokia.com/doc/4.7/qstring.html">QString</a></span> startupMode READ startupMode NOTIFY requestChanged)

        <span class="comment">// The values of the incoming invocation request</span>
        Q_PROPERTY(<span class="type"><a href="http://qt.nokia.com/doc/4.7/qstring.html">QString</a></span> source READ source NOTIFY requestChanged)
        Q_PROPERTY(<span class="type"><a href="http://qt.nokia.com/doc/4.7/qstring.html">QString</a></span> target READ target NOTIFY requestChanged)
        Q_PROPERTY(<span class="type"><a href="http://qt.nokia.com/doc/4.7/qstring.html">QString</a></span> action READ action NOTIFY requestChanged)
        Q_PROPERTY(<span class="type"><a href="http://qt.nokia.com/doc/4.7/qstring.html">QString</a></span> mimeType READ mimeType NOTIFY requestChanged)
        Q_PROPERTY(<span class="type"><a href="http://qt.nokia.com/doc/4.7/qstring.html">QString</a></span> uri READ uri NOTIFY requestChanged)
        Q_PROPERTY(<span class="type"><a href="http://qt.nokia.com/doc/4.7/qstring.html">QString</a></span> data READ data NOTIFY requestChanged)

        <span class="comment">// The textual representation of the card status</span>
        Q_PROPERTY(<span class="type"><a href="http://qt.nokia.com/doc/4.7/qstring.html">QString</a></span> status READ status NOTIFY statusChanged)

    <span class="keyword">public</span>:
        App(<span class="type"><a href="http://qt.nokia.com/doc/4.7/qobject.html">QObject</a></span> <span class="operator">*</span>parent <span class="operator">=</span> <span class="number">0</span>);
        <span class="type">void</span> initFullUI();
        <span class="type">void</span> initComposerUI();
        <span class="type">void</span> initPreviewerUI();
        <span class="type">void</span> initPickerUI();

    <span class="keyword">public</span> Q_SLOTS:
        <span class="comment">// This method is invoked to notify the invocation system that the action has been done</span>
        <span class="type">void</span> cardDone(<span class="keyword">const</span> <span class="type"><a href="http://qt.nokia.com/doc/4.7/qstring.html">QString</a></span><span class="operator">&amp;</span> msg);

    Q_SIGNALS:
        <span class="comment">// The change notification signal of the properties</span>
        <span class="type">void</span> requestChanged();
        <span class="type">void</span> statusChanged();

    <span class="keyword">private</span> Q_SLOTS:
        <span class="comment">// This slot is called whenever an invocation request is received</span>
        <span class="type">void</span> handleInvoke(<span class="keyword">const</span> bb<span class="operator">::</span>system<span class="operator">::</span>InvokeRequest<span class="operator">&amp;</span>);

        <span class="type">void</span> resized(<span class="keyword">const</span> bb<span class="operator">::</span>system<span class="operator">::</span>CardResizeMessage<span class="operator">&amp;</span>);

        <span class="comment">/**
         * This slot is triggered when a card is chosen to be pooled by the system after it is closed. The card should clear it's UI
         * and states so that it is ready for the next invocation.
         */</span>
        <span class="type">void</span> pooled(<span class="keyword">const</span> bb<span class="operator">::</span>system<span class="operator">::</span>CardDoneMessage<span class="operator">&amp;</span>);

    <span class="keyword">private</span>:
        <span class="comment">// The accessor methods of the properties</span>
        <span class="type"><a href="http://qt.nokia.com/doc/4.7/qstring.html">QString</a></span> startupMode() <span class="keyword">const</span>;
        <span class="type"><a href="http://qt.nokia.com/doc/4.7/qstring.html">QString</a></span> source() <span class="keyword">const</span>;
        <span class="type"><a href="http://qt.nokia.com/doc/4.7/qstring.html">QString</a></span> target() <span class="keyword">const</span>;
        <span class="type"><a href="http://qt.nokia.com/doc/4.7/qstring.html">QString</a></span> action() <span class="keyword">const</span>;
        <span class="type"><a href="http://qt.nokia.com/doc/4.7/qstring.html">QString</a></span> mimeType() <span class="keyword">const</span>;
        <span class="type"><a href="http://qt.nokia.com/doc/4.7/qstring.html">QString</a></span> uri() <span class="keyword">const</span>;
        <span class="type"><a href="http://qt.nokia.com/doc/4.7/qstring.html">QString</a></span> data() <span class="keyword">const</span>;
        <span class="type"><a href="http://qt.nokia.com/doc/4.7/qstring.html">QString</a></span> status() <span class="keyword">const</span>;

        <span class="comment">// The central class to manage invocations</span>
        bb<span class="operator">::</span>system<span class="operator">::</span>InvokeManager <span class="operator">*</span>m_invokeManager;

        <span class="comment">// The property values</span>
        <span class="type"><a href="http://qt.nokia.com/doc/4.7/qstring.html">QString</a></span> m_startupMode;
        <span class="type"><a href="http://qt.nokia.com/doc/4.7/qstring.html">QString</a></span> m_source;
        <span class="type"><a href="http://qt.nokia.com/doc/4.7/qstring.html">QString</a></span> m_target;
        <span class="type"><a href="http://qt.nokia.com/doc/4.7/qstring.html">QString</a></span> m_action;
        <span class="type"><a href="http://qt.nokia.com/doc/4.7/qstring.html">QString</a></span> m_mimeType;
        <span class="type"><a href="http://qt.nokia.com/doc/4.7/qstring.html">QString</a></span> m_uri;
        <span class="type"><a href="http://qt.nokia.com/doc/4.7/qstring.html">QString</a></span> m_data;
        <span class="type"><a href="http://qt.nokia.com/doc/4.7/qstring.html">QString</a></span> m_status;
    };</pre>
<p>Inside the constructor the member variables are initialized with default values and the UI is loaded from the main.qml file.</p>
<pre class="cpp">    App<span class="operator">::</span>App(<span class="type"><a href="http://qt.nokia.com/doc/4.7/qobject.html">QObject</a></span> <span class="operator">*</span>parent)
            : <span class="type"><a href="http://qt.nokia.com/doc/4.7/qobject.html">QObject</a></span>(parent)
            <span class="operator">,</span> m_invokeManager(<span class="keyword">new</span> InvokeManager(<span class="keyword">this</span>))
    {
            <span class="comment">// Listen to incoming invocation requests</span>
            connect(m_invokeManager<span class="operator">,</span> SIGNAL(invoked(<span class="keyword">const</span> bb<span class="operator">::</span>system<span class="operator">::</span>InvokeRequest<span class="operator">&amp;</span>))<span class="operator">,</span>
                            <span class="keyword">this</span><span class="operator">,</span> SLOT(handleInvoke(<span class="keyword">const</span> bb<span class="operator">::</span>system<span class="operator">::</span>InvokeRequest<span class="operator">&amp;</span>)));
            connect(m_invokeManager<span class="operator">,</span>
                            SIGNAL(cardResizeRequested(<span class="keyword">const</span> bb<span class="operator">::</span>system<span class="operator">::</span>CardResizeMessage<span class="operator">&amp;</span>))<span class="operator">,</span>
                            <span class="keyword">this</span><span class="operator">,</span> SLOT(resized(<span class="keyword">const</span> bb<span class="operator">::</span>system<span class="operator">::</span>CardResizeMessage<span class="operator">&amp;</span>)));
            connect(m_invokeManager<span class="operator">,</span>
                            SIGNAL(cardPooled(<span class="keyword">const</span> bb<span class="operator">::</span>system<span class="operator">::</span>CardDoneMessage<span class="operator">&amp;</span>))<span class="operator">,</span> <span class="keyword">this</span><span class="operator">,</span>
                            SLOT(pooled(<span class="keyword">const</span> bb<span class="operator">::</span>system<span class="operator">::</span>CardDoneMessage<span class="operator">&amp;</span>)));

            m_source <span class="operator">=</span> m_target <span class="operator">=</span> m_action <span class="operator">=</span> m_mimeType <span class="operator">=</span> m_uri <span class="operator">=</span> m_data <span class="operator">=</span> m_status <span class="operator">=</span>
                            tr(<span class="string">&quot;--&quot;</span>);

            <span class="comment">// Initialize properties with default values</span>
            <span class="keyword">switch</span> (m_invokeManager<span class="operator">-</span><span class="operator">&gt;</span>startupMode()) {
            <span class="keyword">case</span> ApplicationStartupMode<span class="operator">::</span>LaunchApplication:
                    m_startupMode <span class="operator">=</span> tr(<span class="string">&quot;Launch&quot;</span>);
                    initFullUI();
                    <span class="keyword">break</span>;
            <span class="keyword">case</span> ApplicationStartupMode<span class="operator">::</span>InvokeApplication:
                    <span class="comment">// Wait for invoked signal to determine and initialize the appropriate UI</span>
                    m_startupMode <span class="operator">=</span> tr(<span class="string">&quot;Invoke&quot;</span>);
                    <span class="keyword">break</span>;
            <span class="keyword">case</span> ApplicationStartupMode<span class="operator">::</span>InvokeCard:
                    <span class="comment">// Wait for invoked signal to determine and initialize the appropriate UI</span>
                    m_startupMode <span class="operator">=</span> tr(<span class="string">&quot;Card&quot;</span>);
                    <span class="keyword">break</span>;
            }

            <span class="comment">// Create the UI</span>

    }</pre>
<p>To get informed about incoming invocation requests, the custom slot handleInvoke() is connected against the invoked() signal of the <tt>bb::system::InvokeManager</tt> object.</p>
<pre class="cpp">    <span class="type">void</span> App<span class="operator">::</span>handleInvoke(<span class="keyword">const</span> InvokeRequest<span class="operator">&amp;</span> request) {
            <span class="comment">// Copy data from incoming invocation request to properties</span>
            m_source <span class="operator">=</span>
                            <span class="type"><a href="http://qt.nokia.com/doc/4.7/qstring.html">QString</a></span><span class="operator">::</span>fromLatin1(<span class="string">&quot;%1 (%2)&quot;</span>)<span class="operator">.</span>arg(request<span class="operator">.</span>source()<span class="operator">.</span>installId())<span class="operator">.</span>arg(
                                            request<span class="operator">.</span>source()<span class="operator">.</span>groupId());
            m_target <span class="operator">=</span> request<span class="operator">.</span>target();
            m_action <span class="operator">=</span> request<span class="operator">.</span>action();
            m_mimeType <span class="operator">=</span> request<span class="operator">.</span>mimeType();
            m_uri <span class="operator">=</span> request<span class="operator">.</span>uri()<span class="operator">.</span>toString();
            m_data <span class="operator">=</span> <span class="type"><a href="http://qt.nokia.com/doc/4.7/qstring.html">QString</a></span><span class="operator">::</span>fromUtf8(request<span class="operator">.</span>data());

            <span class="keyword">if</span> (m_target <span class="operator">=</span><span class="operator">=</span> <span class="string">&quot;com.example.bb10samples.invocation.sharecomposer&quot;</span>) {
                    initComposerUI();
            } <span class="keyword">else</span> <span class="keyword">if</span> (m_target
                            <span class="operator">=</span><span class="operator">=</span> <span class="string">&quot;com.example.bb10samples.invocation.imagepreviewer&quot;</span>) {
                    initPreviewerUI();
            } <span class="keyword">else</span> <span class="keyword">if</span> (m_target <span class="operator">=</span><span class="operator">=</span> <span class="string">&quot;com.example.bb10samples.invocation.eggpicker&quot;</span>) {
                    initPickerUI();
            }

            <span class="comment">// Signal that the properties have changed</span>
            <span class="keyword">emit</span> requestChanged();
    }</pre>
<p>The values from the passed <tt>bb::system::InvokeRequest</tt> are copied to the property values and the UI is updated by emitting the change notification signal.</p>
<a name="bar-descriptor-xml"></a>
<h2>bar-descriptor.xml</h2>
<p>To make the invoketarget application a candidate for invocations, the BB10 system must know about the invocation interface of the application. That is defined inside the bar-descriptor.xml file of the project inside an <a href="https://developer.blackberry.com/native/beta/documentation/com.qnx.doc.native_sdk.devguide/com.qnx.doc.native_sdk.devguide/topic/r_barfile_dtd_ref_invoke_target.html">invoke-target</a> element.</p>
<pre class="cpp">    <span class="operator">&lt;</span>invoke<span class="operator">-</span>target id<span class="operator">=</span><span class="string">&quot;com.example.bb10samples.invocation.openimage1&quot;</span><span class="operator">&gt;</span>
        <span class="operator">&lt;</span>invoke<span class="operator">-</span>target<span class="operator">-</span>name<span class="operator">&gt;</span>InvokeTarget Image <span class="number">1</span><span class="operator">&lt;</span><span class="operator">/</span>invoke<span class="operator">-</span>target<span class="operator">-</span>name<span class="operator">&gt;</span>
        <span class="operator">&lt;</span>icon<span class="operator">&gt;</span><span class="operator">&lt;</span>image<span class="operator">&gt;</span>icon<span class="operator">.</span>png<span class="operator">&lt;</span><span class="operator">/</span>image<span class="operator">&gt;</span><span class="operator">&lt;</span><span class="operator">/</span>icon<span class="operator">&gt;</span>
        <span class="operator">&lt;</span>type<span class="operator">&gt;</span>application<span class="operator">&lt;</span><span class="operator">/</span>type<span class="operator">&gt;</span>
        <span class="operator">&lt;</span>filter<span class="operator">&gt;</span>
            <span class="operator">&lt;</span>action<span class="operator">&gt;</span>bb<span class="operator">.</span>action<span class="operator">.</span>OPEN<span class="operator">&lt;</span><span class="operator">/</span>action<span class="operator">&gt;</span>
            <span class="operator">&lt;</span>mime<span class="operator">-</span>type<span class="operator">&gt;</span>image<span class="operator">/</span>png<span class="operator">&lt;</span><span class="operator">/</span>mime<span class="operator">-</span>type<span class="operator">&gt;</span>
        <span class="operator">&lt;</span><span class="operator">/</span>filter<span class="operator">&gt;</span>
    <span class="operator">&lt;</span><span class="operator">/</span>invoke<span class="operator">-</span>target<span class="operator">&gt;</span>
    <span class="operator">&lt;</span>invoke<span class="operator">-</span>target id<span class="operator">=</span><span class="string">&quot;com.example.bb10samples.invocation.openimage2&quot;</span><span class="operator">&gt;</span>
        <span class="operator">&lt;</span>invoke<span class="operator">-</span>target<span class="operator">-</span>name<span class="operator">&gt;</span>InvokeTarget Image <span class="number">2</span><span class="operator">&lt;</span><span class="operator">/</span>invoke<span class="operator">-</span>target<span class="operator">-</span>name<span class="operator">&gt;</span>
        <span class="operator">&lt;</span>icon<span class="operator">&gt;</span><span class="operator">&lt;</span>image<span class="operator">&gt;</span>icon<span class="operator">.</span>png<span class="operator">&lt;</span><span class="operator">/</span>image<span class="operator">&gt;</span><span class="operator">&lt;</span><span class="operator">/</span>icon<span class="operator">&gt;</span>
        <span class="operator">&lt;</span>type<span class="operator">&gt;</span>application<span class="operator">&lt;</span><span class="operator">/</span>type<span class="operator">&gt;</span>
        <span class="operator">&lt;</span>filter<span class="operator">&gt;</span>
            <span class="operator">&lt;</span>action<span class="operator">&gt;</span>bb<span class="operator">.</span>action<span class="operator">.</span>OPEN<span class="operator">&lt;</span><span class="operator">/</span>action<span class="operator">&gt;</span>
            <span class="operator">&lt;</span>mime<span class="operator">-</span>type<span class="operator">&gt;</span>image<span class="operator">/</span>png<span class="operator">&lt;</span><span class="operator">/</span>mime<span class="operator">-</span>type<span class="operator">&gt;</span>
        <span class="operator">&lt;</span><span class="operator">/</span>filter<span class="operator">&gt;</span>
    <span class="operator">&lt;</span><span class="operator">/</span>invoke<span class="operator">-</span>target<span class="operator">&gt;</span>
    <span class="operator">&lt;</span>invoke<span class="operator">-</span>target id<span class="operator">=</span><span class="string">&quot;com.example.bb10samples.invocation.card.previewer&quot;</span><span class="operator">&gt;</span>
        <span class="operator">&lt;</span>type<span class="operator">&gt;</span>card<span class="operator">.</span>previewer<span class="operator">&lt;</span><span class="operator">/</span>type<span class="operator">&gt;</span>
        <span class="operator">&lt;</span>filter<span class="operator">&gt;</span>
            <span class="operator">&lt;</span>action<span class="operator">&gt;</span>bb<span class="operator">.</span>action<span class="operator">.</span>OPEN<span class="operator">&lt;</span><span class="operator">/</span>action<span class="operator">&gt;</span>
            <span class="operator">&lt;</span>mime<span class="operator">-</span>type<span class="operator">&gt;</span>image<span class="operator">/</span>png<span class="operator">&lt;</span><span class="operator">/</span>mime<span class="operator">-</span>type<span class="operator">&gt;</span>
        <span class="operator">&lt;</span><span class="operator">/</span>filter<span class="operator">&gt;</span>
    <span class="operator">&lt;</span><span class="operator">/</span>invoke<span class="operator">-</span>target<span class="operator">&gt;</span>
    <span class="operator">&lt;</span>invoke<span class="operator">-</span>target id<span class="operator">=</span><span class="string">&quot;com.example.bb10samples.invocation.card.composer&quot;</span><span class="operator">&gt;</span>
        <span class="operator">&lt;</span>type<span class="operator">&gt;</span>card<span class="operator">.</span>composer<span class="operator">&lt;</span><span class="operator">/</span>type<span class="operator">&gt;</span>
        <span class="operator">&lt;</span>filter<span class="operator">&gt;</span>
            <span class="operator">&lt;</span>action<span class="operator">&gt;</span>bb<span class="operator">.</span>action<span class="operator">.</span>OPEN<span class="operator">&lt;</span><span class="operator">/</span>action<span class="operator">&gt;</span>
            <span class="operator">&lt;</span>mime<span class="operator">-</span>type<span class="operator">&gt;</span>image<span class="operator">/</span>png<span class="operator">&lt;</span><span class="operator">/</span>mime<span class="operator">-</span>type<span class="operator">&gt;</span>
        <span class="operator">&lt;</span><span class="operator">/</span>filter<span class="operator">&gt;</span>
    <span class="operator">&lt;</span><span class="operator">/</span>invoke<span class="operator">-</span>target<span class="operator">&gt;</span>
    <span class="operator">&lt;</span>invoke<span class="operator">-</span>target id<span class="operator">=</span><span class="string">&quot;com.example.bb10samples.invocation.card.picker&quot;</span><span class="operator">&gt;</span>
        <span class="operator">&lt;</span>type<span class="operator">&gt;</span>card<span class="operator">.</span>picker<span class="operator">&lt;</span><span class="operator">/</span>type<span class="operator">&gt;</span>
        <span class="operator">&lt;</span>filter<span class="operator">&gt;</span>
            <span class="operator">&lt;</span>action<span class="operator">&gt;</span>bb<span class="operator">.</span>action<span class="operator">.</span>OPEN<span class="operator">&lt;</span><span class="operator">/</span>action<span class="operator">&gt;</span>
            <span class="operator">&lt;</span>mime<span class="operator">-</span>type<span class="operator">&gt;</span>image<span class="operator">/</span>png<span class="operator">&lt;</span><span class="operator">/</span>mime<span class="operator">-</span>type<span class="operator">&gt;</span>
        <span class="operator">&lt;</span><span class="operator">/</span>filter<span class="operator">&gt;</span>
    <span class="operator">&lt;</span><span class="operator">/</span>invoke<span class="operator">-</span>target<span class="operator">&gt;</span></pre>
</div>
<!-- @@@invoketarget -->
  <div class="ft">
    <span></span>
  </div>
</div> 
<div class="footer">
  <p>
     Copyright 2012 Research In Motion Limited.
  <br />
    This document may be used under the terms of the <a href="http://www.gnu.org/licenses/fdl.html">GNU
    Free Documentation License version 1.3</a>
    as published by the Free Software Foundation.</p>
</div>
</body>
</html>
