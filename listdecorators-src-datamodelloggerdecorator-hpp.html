<?xml version="1.0" encoding="ISO-8859-1"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>Cascades : DataModelLoggerDecorator.hpp Example File (listdecorators/src/DataModelLoggerDecorator.hpp)</title>
  <link rel="stylesheet" type="text/css" href="style/offline.css" />
</head>
<body>
<div class="header" id="qtdocheader">
  <div class="content"> 
    <a href="index.html" class="qtref"><span>Qt-based BB10 API Examples Documentation</span></a>
  </div>
  <div class="breadcrumb toolblock">
    <ul>
      <li class="first"><a href="index.html">Home</a></li>
      <!--  Breadcrumbs go here -->
    </ul>
  </div>
</div>
<div class="content mainContent">
<h1 class="title">DataModelLoggerDecorator.hpp Example File</h1>
<span class="small-subtitle">listdecorators/src/DataModelLoggerDecorator.hpp</span>
<!-- $$$listdecorators/src/DataModelLoggerDecorator.hpp-description -->
<div class="descr"> <a name="details"></a>
<pre class="cpp">    <span class="comment">/*
     * Copyright (c) 2013 BlackBerry Limited.
     *
     * Licensed under the Apache License, Version 2.0 (the &quot;License&quot;);
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     * http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an &quot;AS IS&quot; BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */</span>

    <span class="preprocessor">#ifndef DATAMODELLOGGER_H_</span>
    <span class="preprocessor">#define DATAMODELLOGGER_H_</span>

    <span class="preprocessor">#include &lt;bb/cascades/datamanager/DataModelDecorator&gt;</span>

    <span class="comment">/**
     * A data model that wraps another data model and logs all of its interactions.
     * The intended purpose of this class is to enable highly-verbose logging for
     * debugging only.
     *
     * It is not recommended to enable this class in production code.
     */</span>
    <span class="keyword">class</span> DataModelLoggerDecorator: <span class="keyword">public</span> bb<span class="operator">::</span>cascades<span class="operator">::</span>datamanager<span class="operator">::</span>DataModelDecorator {
        Q_OBJECT

        <span class="comment">// Property for toggling data logging.</span>
        Q_PROPERTY(<span class="type">bool</span> dataDetails READ logData WRITE setLogData)

        <span class="comment">// Property for toggling the start of each function logging.</span>
        Q_PROPERTY(<span class="type">bool</span> funcBegin READ logBegin WRITE setLogBegin)

        <span class="comment">// Property for toggling itemsChanged callback events logging.</span>
        Q_PROPERTY(<span class="type">bool</span> allCallbacks READ logAllCallbacks WRITE setLogAllCallbacks)

    <span class="keyword">public</span>:
        <span class="keyword">explicit</span> DataModelLoggerDecorator(<span class="type"><a href="http://qt.nokia.com/doc/4.7/qobject.html">QObject</a></span> <span class="operator">*</span>parent <span class="operator">=</span> <span class="number">0</span>);
        <span class="keyword">virtual</span> <span class="operator">~</span>DataModelLoggerDecorator();

        <span class="comment">/**
         * Call the method childCount of the DataModel it wraps
         *
         * @see DataModel
         */</span>
        <span class="keyword">virtual</span> <span class="type">int</span> childCount(<span class="keyword">const</span> <span class="type"><a href="http://qt.nokia.com/doc/4.7/qvariant.html#QVariantList-typedef">QVariantList</a></span> <span class="operator">&amp;</span>indexPath);

        <span class="comment">/*
         * Call the method hasChildren of the DataModel it wraps
         *
         * @see DataModel
         */</span>
        <span class="keyword">virtual</span> <span class="type">bool</span> hasChildren(<span class="keyword">const</span> <span class="type"><a href="http://qt.nokia.com/doc/4.7/qvariant.html#QVariantList-typedef">QVariantList</a></span> <span class="operator">&amp;</span>indexPath);

        <span class="comment">/**
         * Call the method itemType of the DataModel it wraps
         *
         * @see DataModel
         */</span>
        <span class="keyword">virtual</span> <span class="type"><a href="http://qt.nokia.com/doc/4.7/qstring.html">QString</a></span> itemType(<span class="keyword">const</span> <span class="type"><a href="http://qt.nokia.com/doc/4.7/qvariant.html#QVariantList-typedef">QVariantList</a></span> <span class="operator">&amp;</span>indexPath);

        <span class="comment">/*
         * Call the method data of the DataModel it wraps
         *
         * @see DataModel
         */</span>
        <span class="keyword">virtual</span> <span class="type"><a href="http://qt.nokia.com/doc/4.7/qvariant.html">QVariant</a></span> data(<span class="keyword">const</span> <span class="type"><a href="http://qt.nokia.com/doc/4.7/qvariant.html#QVariantList-typedef">QVariantList</a></span> <span class="operator">&amp;</span>indexPath);

        <span class="comment">/**
         * Tell the DataModel to load if it has an invokable load() function.
         */</span>
        Q_INVOKABLE <span class="type">void</span> load();

        <span class="comment">/**
         * Whether to log the details of each data item that is returned.
         * return If true, log all details.
         */</span>
        <span class="type">bool</span> logData();

        <span class="comment">/**
         * Setter for the logData variable.
         */</span>
        <span class="type">void</span> setLogData(<span class="type">bool</span> enable);

        <span class="comment">/**
         * Whether to log the start of each instrumented function.
         * return If true, log the start of functions.
         */</span>
        <span class="type">bool</span> logBegin();

        <span class="comment">/**
         * Setter for the logBegin variable.
         */</span>
        <span class="type">void</span> setLogBegin(<span class="type">bool</span> enable);

        <span class="comment">/**
         * Whether to log all itemsChanged callback events, or just the interesting ones,
         * e.g. add/remove.
         * return If true, log all itemsChanged callback events.
         */</span>
        <span class="type">bool</span> logAllCallbacks();

        <span class="comment">/**
         * Setter for the logAllCallbacks variable.
         */</span>
        <span class="type">void</span> setLogAllCallbacks(<span class="type">bool</span> enable);

    <span class="keyword">public</span> Q_SLOTS:
        <span class="comment">// This method emits the onItemAdded signal with the added index path.</span>
        <span class="keyword">virtual</span> <span class="type">void</span> onItemAdded(<span class="type"><a href="http://qt.nokia.com/doc/4.7/qvariant.html#QVariantList-typedef">QVariantList</a></span> indexPath);

        <span class="comment">// This method emits the onItemUpdated signal with the updated index path.</span>
        <span class="keyword">virtual</span> <span class="type">void</span> onItemUpdated(<span class="type"><a href="http://qt.nokia.com/doc/4.7/qvariant.html#QVariantList-typedef">QVariantList</a></span> indexPath);

        <span class="comment">// This method emits the onItemRemoved signal with the removed index path.</span>
        <span class="keyword">virtual</span> <span class="type">void</span> onItemRemoved(<span class="type"><a href="http://qt.nokia.com/doc/4.7/qvariant.html#QVariantList-typedef">QVariantList</a></span> indexPath);

        <span class="comment">// This method emits the onItemsChanged signal with the type of change and IndexMapper to map currently cached items.</span>
        <span class="keyword">virtual</span> <span class="type">void</span> onItemsChanged(
                bb<span class="operator">::</span>cascades<span class="operator">::</span>DataModelChangeType<span class="operator">::</span>Type eChangeType <span class="operator">=</span>
                        bb<span class="operator">::</span>cascades<span class="operator">::</span>DataModelChangeType<span class="operator">::</span>Init<span class="operator">,</span>
                <span class="type"><a href="http://qt.nokia.com/doc/4.7/qsharedpointer.html">QSharedPointer</a></span><span class="operator">&lt;</span>bb<span class="operator">::</span>cascades<span class="operator">::</span>DataModel<span class="operator">::</span>IndexMapper<span class="operator">&gt;</span> indexMapper <span class="operator">=</span>
                        <span class="type"><a href="http://qt.nokia.com/doc/4.7/qsharedpointer.html">QSharedPointer</a></span><span class="operator">&lt;</span>bb<span class="operator">::</span>cascades<span class="operator">::</span>DataModel<span class="operator">::</span>IndexMapper<span class="operator">&gt;</span>(<span class="number">0</span>));

    Q_SIGNALS:
        <span class="comment">// This signal is emited when model is loaded.</span>
        <span class="type">void</span> loaded();

    <span class="keyword">private</span>:
        <span class="comment">// Timer used for logging execution time.</span>
        <span class="type"><a href="http://qt.nokia.com/doc/4.7/qelapsedtimer.html">QElapsedTimer</a></span> m_timer;

        <span class="type">bool</span> m_logBegin;
        <span class="type">bool</span> m_logData;
        <span class="type">bool</span> m_logAllCallbacks;

        <span class="comment">// This method pretty prints the start of method with given list argument and starts the execution timer.</span>
        <span class="type">void</span> logStart(<span class="keyword">const</span> <span class="type"><a href="http://qt.nokia.com/doc/4.7/qstring.html">QString</a></span> <span class="operator">&amp;</span>method<span class="operator">,</span> <span class="keyword">const</span> <span class="type"><a href="http://qt.nokia.com/doc/4.7/qvariant.html#QVariantList-typedef">QVariantList</a></span> <span class="operator">&amp;</span>list);

        <span class="comment">// This method pretty prints the end of the started method with the methods result and elapsed execution time.</span>
        <span class="type">void</span> logEnd(<span class="keyword">const</span> <span class="type"><a href="http://qt.nokia.com/doc/4.7/qstring.html">QString</a></span> <span class="operator">&amp;</span>method<span class="operator">,</span> <span class="keyword">const</span> <span class="type"><a href="http://qt.nokia.com/doc/4.7/qvariant.html#QVariantList-typedef">QVariantList</a></span> <span class="operator">&amp;</span>list<span class="operator">,</span>
                <span class="keyword">const</span> <span class="type"><a href="http://qt.nokia.com/doc/4.7/qstring.html">QString</a></span> <span class="operator">&amp;</span>result);Q_DISABLE_COPY(DataModelLoggerDecorator)
        ;
    };
    <span class="preprocessor">#endif /* DATAMODELLOGGER_H_ */</span></pre>
</div>
<!-- @@@listdecorators/src/DataModelLoggerDecorator.hpp -->
  <div class="ft">
    <span></span>
  </div>
</div> 
<div class="footer">
  <p>
     Copyright 2012 Research In Motion Limited.
  <br />
    This document may be used under the terms of the <a href="http://www.gnu.org/licenses/fdl.html">GNU
    Free Documentation License version 1.3</a>
    as published by the Free Software Foundation.</p>
</div>
</body>
</html>
