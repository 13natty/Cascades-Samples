<?xml version="1.0" encoding="ISO-8859-1"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<!-- qtsoap.cpp -->
  <title>Cascades : QtSoapHttpTransport Class Reference</title>
  <link rel="stylesheet" type="text/css" href="style/offline.css" />
</head>
<body>
<div class="header" id="qtdocheader">
  <div class="content"> 
    <a href="index.html" class="qtref"><span>Qt-based BB10 API Examples Documentation</span></a>
  </div>
  <div class="breadcrumb toolblock">
    <ul>
      <li class="first"><a href="index.html">Home</a></li>
      <!--  Breadcrumbs go here -->
<li><a href="http://qt.nokia.com/doc/4.7/modules.html">Modules</a></li>
<li>QtSoapHttpTransport</li>
    </ul>
  </div>
</div>
<div class="content mainContent">
<div class="toc">
<h3><a name="toc">Contents</a></h3>
<ul>
<li class="level1"><a href="#public-functions">Public Functions</a></li>
<li class="level1"><a href="#signals">Signals</a></li>
<li class="level1"><a href="#details">Detailed Description</a></li>
</ul>
</div>
<h1 class="title">QtSoapHttpTransport Class Reference</h1>
<!-- $$$QtSoapHttpTransport-brief -->
<p>The QtSoapHttpTransport class provides a mechanism for transporting SOAP messages to and from other hosts using the HTTP protocol. <a href="#details">More...</a></p>
<!-- @@@QtSoapHttpTransport -->
<pre class="cpp">    <span class="preprocessor">#include &lt;QtSoapHttpTransport&gt;</span></pre><p><b>Inherits: </b><a href="http://qt.nokia.com/doc/4.7/qobject.html">QObject</a>.</p>
<ul>
<li><a href="qtsoaphttptransport-members.html">List of all members, including inherited members</a></li>
<li><a href="qtsoaphttptransport-obsolete.html">Obsolete members</a></li>
</ul>
<a name="public-functions"></a>
<h2>Public Functions</h2>
<table class="alignedsummary">
<tr><td class="memItemLeft rightAlign topAlign"> </td><td class="memItemRight bottomAlign"><b><a href="qtsoaphttptransport.html#QtSoapHttpTransport">QtSoapHttpTransport</a></b> ( QObject * <i>parent</i> = 0 )</td></tr>
<tr><td class="memItemLeft rightAlign topAlign"> </td><td class="memItemRight bottomAlign"><b><a href="qtsoaphttptransport.html#dtor.QtSoapHttpTransport">~QtSoapHttpTransport</a></b> ()</td></tr>
<tr><td class="memItemLeft rightAlign topAlign"> const QtSoapMessage &amp; </td><td class="memItemRight bottomAlign"><b><a href="qtsoaphttptransport.html#getResponse">getResponse</a></b> () const</td></tr>
<tr><td class="memItemLeft rightAlign topAlign"> QNetworkAccessManager * </td><td class="memItemRight bottomAlign"><b><a href="qtsoaphttptransport.html#networkAccessManager">networkAccessManager</a></b> ()</td></tr>
<tr><td class="memItemLeft rightAlign topAlign"> QNetworkReply * </td><td class="memItemRight bottomAlign"><b><a href="qtsoaphttptransport.html#networkReply">networkReply</a></b> ()</td></tr>
<tr><td class="memItemLeft rightAlign topAlign"> void </td><td class="memItemRight bottomAlign"><b><a href="qtsoaphttptransport.html#setAction">setAction</a></b> ( const QString &amp; <i>action</i> )</td></tr>
<tr><td class="memItemLeft rightAlign topAlign"> void </td><td class="memItemRight bottomAlign"><b><a href="qtsoaphttptransport.html#setHost">setHost</a></b> ( const QString &amp; <i>host</i>, bool <i>useSecureHTTP</i> = false, int <i>port</i> = 0 )</td></tr>
<tr><td class="memItemLeft rightAlign topAlign"> void </td><td class="memItemRight bottomAlign"><b><a href="qtsoaphttptransport.html#submitRequest">submitRequest</a></b> ( QtSoapMessage &amp; <i>request</i>, const QString &amp; <i>path</i> )</td></tr>
</table>
<ul>
<li class="fn">29 public functions inherited from <a href="http://qt.nokia.com/doc/4.7/qobject.html#public-functions">QObject</a></li>
</ul>
<a name="signals"></a>
<h2>Signals</h2>
<table class="alignedsummary">
<tr><td class="memItemLeft rightAlign topAlign"> void </td><td class="memItemRight bottomAlign"><b><a href="qtsoaphttptransport.html#responseReady">responseReady</a></b> ()</td></tr>
<tr><td class="memItemLeft rightAlign topAlign"> void </td><td class="memItemRight bottomAlign"><b><a href="qtsoaphttptransport.html#responseReady-2">responseReady</a></b> ( const QtSoapMessage &amp; <i>response</i> )</td></tr>
</table>
<ul>
<li class="fn">1 signal inherited from <a href="http://qt.nokia.com/doc/4.7/qobject.html#signals">QObject</a></li>
</ul>
<h3>Additional Inherited Members</h3>
<ul>
<li class="fn">1 property inherited from <a href="http://qt.nokia.com/doc/4.7/qobject.html#properties">QObject</a></li>
<li class="fn">1 public slot inherited from <a href="http://qt.nokia.com/doc/4.7/qobject.html#public-slots">QObject</a></li>
<li class="fn">1 public variable inherited from <a href="http://qt.nokia.com/doc/4.7/qobject.html#public-variables">QObject</a></li>
<li class="fn">4 static public members inherited from <a href="http://qt.nokia.com/doc/4.7/qobject.html#static-public-members">QObject</a></li>
<li class="fn">7 protected functions inherited from <a href="http://qt.nokia.com/doc/4.7/qobject.html#protected-functions">QObject</a></li>
<li class="fn">2 protected variables inherited from <a href="http://qt.nokia.com/doc/4.7/qobject.html#protected-variables">QObject</a></li>
</ul>
<a name="details"></a>
<!-- $$$QtSoapHttpTransport-description -->
<div class="descr">
<h2>Detailed Description</h2>
<p>The QtSoapHttpTransport class provides a mechanism for transporting SOAP messages to and from other hosts using the HTTP protocol.</p>
<p>Use this class to submit SOAP messages to a web service. Set the hostname of the SOAP server with <a href="qtsoaphttptransport.html#setHost">setHost</a>(). Some servers also require the SOAPAction header to be set, and you can do this with <a href="qtsoaphttptransport.html#setAction">setAction</a>(). Next, submit the request with <a href="qtsoaphttptransport.html#submitRequest">submitRequest</a>(), passing the message to submit together with the path that you want to submit the message to. The <a href="qtsoaphttptransport.html#responseReady">responseReady</a>() signal is emitted when a response has been received. Call <a href="qtsoaphttptransport.html#getResponse">getResponse</a>() to get the reponse from the service.</p>
<p>QtSoapHttpTransport usage example: If a SOAP weather service was running on the host weather.example.com, the following code might be used to find the temperature in any given city:</p>
<pre class="cpp">    <span class="type">void</span> WeatherFetcher<span class="operator">::</span>findTemperature(<span class="keyword">const</span> <span class="type"><a href="http://qt.nokia.com/doc/4.7/qstring.html">QString</a></span> <span class="operator">&amp;</span>city)
    {
        <span class="type"><a href="qtsoapmessage.html">QtSoapMessage</a></span> message;
        message<span class="operator">.</span>setMethod(<span class="string">&quot;getTemperature&quot;</span><span class="operator">,</span> <span class="string">&quot;http://weather.example.com/temperature&quot;</span>);
        message<span class="operator">.</span>setMethodArgument(<span class="string">&quot;city&quot;</span><span class="operator">,</span> <span class="string">&quot;&quot;</span><span class="operator">,</span> city);

        <span class="comment">// transport is a private member of WeatherFetcher, of type QtSoapHttpTransport</span>
        transport<span class="operator">.</span>setHost(<span class="string">&quot;www.example.com&quot;</span>);
        connect(<span class="operator">&amp;</span>transport<span class="operator">,</span> SIGNAL(responseReady())<span class="operator">,</span> SLOT(readResponse()));

        transport<span class="operator">.</span>submitRequest(message<span class="operator">,</span> <span class="string">&quot;/weatherfetcher/fetch.asp&quot;</span>);
    }</pre>
<p>This is an example implementation of the readResponse() slot in the WeatherFetcher class:</p>
<pre class="cpp">    <span class="type">void</span> WeatherFetcher<span class="operator">::</span>readResponse()
    {
        <span class="keyword">const</span> <span class="type"><a href="qtsoapmessage.html">QtSoapMessage</a></span> <span class="operator">&amp;</span>response <span class="operator">=</span> transport<span class="operator">.</span>getResponse();
        <span class="keyword">if</span> (response<span class="operator">.</span>isFault()) {
            cout <span class="operator">&lt;</span><span class="operator">&lt;</span> response<span class="operator">.</span>faultString()<span class="operator">.</span>toString()<span class="operator">.</span>toLatin1()<span class="operator">.</span>constData() <span class="operator">&lt;</span><span class="operator">&lt;</span> endl;
            <span class="keyword">return</span>;
        }

        <span class="keyword">const</span> <span class="type"><a href="qtsoaptype.html">QtSoapType</a></span> <span class="operator">&amp;</span>returnValue <span class="operator">=</span> response<span class="operator">.</span>returnValue();
        <span class="keyword">if</span> (returnValue<span class="operator">[</span><span class="string">&quot;temperature&quot;</span><span class="operator">]</span><span class="operator">.</span>isValid()) {
        cout <span class="operator">&lt;</span><span class="operator">&lt;</span> <span class="string">&quot;The current temperature is &quot;</span>
             <span class="operator">&lt;</span><span class="operator">&lt;</span> returnValue<span class="operator">[</span><span class="string">&quot;temperature&quot;</span><span class="operator">]</span><span class="operator">.</span>toString()<span class="operator">.</span>toLatin1()<span class="operator">.</span>constData()
             <span class="operator">&lt;</span><span class="operator">&lt;</span> <span class="string">&quot; degrees Celcius.&quot;</span> <span class="operator">&lt;</span><span class="operator">&lt;</span> endl;
    }</pre>
</div>
<p><b>See also </b><a href="qtsoapmessage.html">QtSoapMessage</a> and <a href="qtsoaptype.html">QtSoapType</a>.</p>
<!-- @@@QtSoapHttpTransport -->
<div class="func">
<h2>Member Function Documentation</h2>
<!-- $$$QtSoapHttpTransport[overload1]$$$QtSoapHttpTransportQObject* -->
<h3 class="fn"><a name="QtSoapHttpTransport"></a>QtSoapHttpTransport::<span class="name">QtSoapHttpTransport</span> ( <span class="type"><a href="http://qt.nokia.com/doc/4.7/qobject.html">QObject</a></span> * <i>parent</i> = 0 )</h3>
<p>Constructs a <a href="qtsoaphttptransport.html">QtSoapHttpTransport</a> object. Passes <i>parent</i> to <a href="http://qt.nokia.com/doc/4.7/qobject.html">QObject</a>'s constructor.</p>
<!-- @@@QtSoapHttpTransport -->
<!-- $$$~QtSoapHttpTransport[overload1]$$$~QtSoapHttpTransport -->
<h3 class="fn"><a name="dtor.QtSoapHttpTransport"></a>QtSoapHttpTransport::<span class="name">~QtSoapHttpTransport</span> ()</h3>
<p>Destructs a <a href="qtsoaphttptransport.html">QtSoapHttpTransport</a>.</p>
<!-- @@@~QtSoapHttpTransport -->
<!-- $$$getResponse[overload1]$$$getResponse -->
<h3 class="fn"><a name="getResponse"></a>const <span class="type"><a href="qtsoapmessage.html">QtSoapMessage</a></span> &amp; QtSoapHttpTransport::<span class="name">getResponse</span> () const</h3>
<p>Returns the most recently received response SOAP message. This message could be a Fault message, so it is wise to check using <a href="qtsoapmessage.html#isFault">QtSoapMessage::isFault</a>() before processing the response.</p>
<!-- @@@getResponse -->
<!-- $$$networkAccessManager[overload1]$$$networkAccessManager -->
<h3 class="fn"><a name="networkAccessManager"></a><span class="type"><a href="http://qt.nokia.com/doc/4.7/qnetworkaccessmanager.html">QNetworkAccessManager</a></span> * QtSoapHttpTransport::<span class="name">networkAccessManager</span> ()</h3>
<p>Returns a pointer to the <a href="http://qt.nokia.com/doc/4.7/qnetworkaccessmanager.html">QNetworkAccessManager</a> object used by this transport. This is useful if the application needs to connect to its signals, or set or read its cookie jar, etc.</p>
<!-- @@@networkAccessManager -->
<!-- $$$networkReply[overload1]$$$networkReply -->
<h3 class="fn"><a name="networkReply"></a><span class="type"><a href="http://qt.nokia.com/doc/4.7/qnetworkreply.html">QNetworkReply</a></span> * QtSoapHttpTransport::<span class="name">networkReply</span> ()</h3>
<p>Returns a pointer to the <a href="http://qt.nokia.com/doc/4.7/qnetworkreply.html">QNetworkReply</a> object of the current (or last) request, or 0 if no such object is currently available.</p>
<p>This is useful if the application needs to access the raw header data etc.</p>
<!-- @@@networkReply -->
<!-- $$$responseReady[overload1]$$$responseReady -->
<h3 class="fn"><a name="responseReady"></a><span class="type">void</span> QtSoapHttpTransport::<span class="name">responseReady</span> ()<tt> [signal]</tt></h3>
<p>This signal is emitted when a SOAP response is received from a remote peer.</p>
<p><b>See also </b><a href="qtsoaphttptransport.html#getResponse">getResponse</a>().</p>
<!-- @@@responseReady -->
<!-- $$$responseReady$$$responseReadyconstQtSoapMessage& -->
<h3 class="fn"><a name="responseReady-2"></a><span class="type">void</span> QtSoapHttpTransport::<span class="name">responseReady</span> ( const <span class="type"><a href="qtsoapmessage.html">QtSoapMessage</a></span> &amp; <i>response</i> )<tt> [signal]</tt></h3>
<p>This signal is emitted when a SOAP response is received from a remote peer. The received response is available in <i>response</i>. This signal is emitted in tandem with the argument-less <a href="qtsoaphttptransport.html#responseReady">responseReady</a>() signal.</p>
<p><b>See also </b><a href="qtsoaphttptransport.html#responseReady">responseReady</a>().</p>
<!-- @@@responseReady -->
<!-- $$$setAction[overload1]$$$setActionconstQString& -->
<h3 class="fn"><a name="setAction"></a><span class="type">void</span> QtSoapHttpTransport::<span class="name">setAction</span> ( const <span class="type"><a href="http://qt.nokia.com/doc/4.7/qstring.html">QString</a></span> &amp; <i>action</i> )</h3>
<p>Sets the HTTP header SOAPAction to <i>action</i>.</p>
<!-- @@@setAction -->
<!-- $$$setHost[overload1]$$$setHostconstQString&boolint -->
<h3 class="fn"><a name="setHost"></a><span class="type">void</span> QtSoapHttpTransport::<span class="name">setHost</span> ( const <span class="type"><a href="http://qt.nokia.com/doc/4.7/qstring.html">QString</a></span> &amp; <i>host</i>, <span class="type">bool</span> <i>useSecureHTTP</i> = false, <span class="type">int</span> <i>port</i> = 0 )</h3>
<p>Sets the <i>host</i> this transport should connect to. The transport mode will be HTTP, unless <i>useSecureHTTP</i> is set, in which case it will be HTTPS. This transport will connect to the well-known ports by default (80 for HTTP, 443 for HTTPS), unless a different, non-zero port is specified in <i>port</i>.</p>
<!-- @@@setHost -->
<!-- $$$submitRequest[overload1]$$$submitRequestQtSoapMessage&constQString& -->
<h3 class="fn"><a name="submitRequest"></a><span class="type">void</span> QtSoapHttpTransport::<span class="name">submitRequest</span> ( <span class="type"><a href="qtsoapmessage.html">QtSoapMessage</a></span> &amp; <i>request</i>, const <span class="type"><a href="http://qt.nokia.com/doc/4.7/qstring.html">QString</a></span> &amp; <i>path</i> )</h3>
<p>Submits the SOAP message <i>request</i> to the path <i>path</i> on the HTTP server set using <a href="qtsoaphttptransport.html#setHost">setHost</a>().</p>
<!-- @@@submitRequest -->
</div>
  <div class="ft">
    <span></span>
  </div>
</div> 
<div class="footer">
  <p>
     Copyright 2012 Research In Motion Limited.
  <br />
    This document may be used under the terms of the <a href="http://www.gnu.org/licenses/fdl.html">GNU
    Free Documentation License version 1.3</a>
    as published by the Free Software Foundation.</p>
</div>
</body>
</html>
